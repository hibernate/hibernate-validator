<?xml version="1.0" encoding="UTF-8"?>
<!--
    SPDX-License-Identifier: Apache-2.0
    Copyright Red Hat Inc. and Hibernate Authors
-->
<!-- child.project.url.inherit.append.path is weird but necessary to have correct URLs in flattened POMs,
     see XSD for more info. -->
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"
         child.project.url.inherit.append.path="false">
    <modelVersion>4.0.0</modelVersion>

    <groupId>org.hibernate.validator</groupId>
    <artifactId>hibernate-validator-parent</artifactId>
    <version>9.0.0-SNAPSHOT</version>
    <packaging>pom</packaging>

    <name>Hibernate Validator</name>
    <url>https://hibernate.org/validator</url>
    <description>Aggregator of the Hibernate Validator modules.</description>

    <developers>
        <developer>
            <id>epbernard</id>
            <name>Emmanuel Bernard</name>
            <email>emmanuel@hibernate.org</email>
            <organization>Red Hat, Inc.</organization>
            <url>http://in.relation.to/emmanuel-bernard/</url>
        </developer>
        <developer>
            <id>hardy.ferentschik</id>
            <name>Hardy Ferentschik</name>
            <email>hferents@redhat.com</email>
            <organization>Red Hat, Inc.</organization>
            <url>http://in.relation.to/hardy-ferentschik/</url>
        </developer>
        <developer>
            <id>gunnar.morling</id>
            <name>Gunnar Morling</name>
            <email>gunnar@hibernate.org</email>
            <organization>Red Hat, Inc.</organization>
            <url>http://in.relation.to/gunnar-morling/</url>
        </developer>
        <developer>
            <id>kevinpollet</id>
            <name>Kevin Pollet</name>
            <email>kevin.pollet@serli.com</email>
            <organization>SERLI</organization>
            <url>http://www.serli.com/</url>
        </developer>
        <developer>
            <id>davide.dalto</id>
            <name>Davide D'Alto</name>
            <email>davide@hibernate.org</email>
            <organization>Red Hat, Inc.</organization>
            <url>http://in.relation.to/davide-dalto/</url>
        </developer>
        <developer>
            <id>guillaume.smet</id>
            <name>Guillaume Smet</name>
            <email>guillaume.smet@hibernate.org</email>
            <organization>Red Hat, Inc.</organization>
            <url>http://in.relation.to/guillaume-smet/</url>
        </developer>
        <developer>
            <id>marko.bekhta</id>
            <name>Marko Bekhta</name>
            <email>marko@hibernate.org</email>
            <organization>Red Hat, Inc.</organization>
            <url>http://in.relation.to/marko-bekhta/</url>
        </developer>
    </developers>

    <contributors>
        <contributor>
            <name>George Gastaldi</name>
            <email>gegastaldi@gmail.com</email>
        </contributor>
    </contributors>

    <mailingLists>
        <mailingList>
            <name>hibernate-dev</name>
            <post>hibernate-dev@lists.jboss.org</post>
        </mailingList>
    </mailingLists>

    <modules>
        <module>parents/internal</module>
        <module>parents/public</module>
        <module>build/build-config</module>
        <module>build/enforcer</module>
        <module>bom</module>
        <module>test-utils</module>
        <module>engine</module>
        <module>tck-runner</module>
        <module>annotation-processor</module>
        <module>cdi</module>
        <module>performance</module>
        <module>integrationtest/wildfly</module>
        <module>integrationtest/java/modules/simple</module>
        <module>integrationtest/java/modules/no-el</module>
        <module>integrationtest/java/modules/test-utils</module>
        <module>integrationtest/java/modules/cdi</module>
    </modules>

    <properties>
        <project.build.outputTimestamp>2024-09-04T17:18:44Z</project.build.outputTimestamp>

        <!-- Version to be used as baseline for API/SPI change reports -->

        <previous.stable>6.0.10.Final</previous.stable>

        <!-- URLs used in javadoc and documentation generation -->

        <bv.spec.url>https://jakarta.ee/specifications/bean-validation/3.1/jakarta-validation-spec-3.1</bv.spec.url>
        <java.api-docs.base-url>https://docs.oracle.com/en/java/javase/17/docs/api</java.api-docs.base-url>
        <java.technotes.base-url>http://docs.oracle.com/javase/8/docs/technotes</java.technotes.base-url>
        <javaee.api-docs.base-url>https://jakarta.ee/specifications/platform/11/apidocs</javaee.api-docs.base-url>
        <javafx.docs.url>https://openjfx.io/openjfx-docs/</javafx.docs.url>

        <!-- Module names used for Java 9 modules and OSGi bundles -->

        <hibernate-validator.module-name>org.hibernate.validator</hibernate-validator.module-name>
        <hibernate-validator-cdi.module-name>org.hibernate.validator.cdi</hibernate-validator-cdi.module-name>

        <!-- Dependencies versions -->

        <version.jakarta.validation.validation-tck>3.1.1</version.jakarta.validation.validation-tck>

        <version.com.thoughtworks.paranamer>2.8</version.com.thoughtworks.paranamer>
        <version.org.glassfish.expressly>6.0.0-M1</version.org.glassfish.expressly>
        <version.org.jboss.logging.jboss-logging>3.6.1.Final</version.org.jboss.logging.jboss-logging>
        <version.org.jboss.logging.jboss-logging-tools>3.0.2.Final</version.org.jboss.logging.jboss-logging-tools>

        <!-- Currently supported version of WildFly -->
        <version.wildfly>34.0.0.Final</version.wildfly>
        <!-- Used to create a patch file for the second version of WildFly we support -->
        <!--<version.wildfly.secondary>18.0.1.Final</version.wildfly.secondary>-->
        <!-- Version used to run the TCK in incontainer mode -->
        <version.wildfly.tck>${version.wildfly}</version.wildfly.tck>
        <skip.wildfly.integration.test.hibernate.validator>true</skip.wildfly.integration.test.hibernate.validator>
        <skip.wildfly.patch.hibernate.validator>${skip.wildfly.integration.test.hibernate.validator}</skip.wildfly.patch.hibernate.validator>
        <skip.wildfly.patch.unpack.server>${skip.wildfly.patch.hibernate.validator}</skip.wildfly.patch.unpack.server>
        <!--
            Change between `wildfly` and `wildfly-preview` depending on which distribution you want to test against.
            Currently (WF 33) the `wildfly-preview` is the distribution based on the Jakarta EE 11.
        -->
        <wildfly.distribution.name>wildfly-preview</wildfly.distribution.name>
        <wildfly.target-dir>${project.build.directory}/wildfly-patched/${wildfly.distribution.name}-${version.wildfly}</wildfly.target-dir>
        <wildfly.actual.target-dir>${wildfly.target-dir}</wildfly.actual.target-dir>
        <wildfly.modules-dir>${wildfly.actual.target-dir}/modules/system/layers/base</wildfly.modules-dir>

        <!--
            These dependencies should be aligned with the ones from the WildFly version we support
            See http://search.maven.org/#search|gav|1|g%3A"org.wildfly"%20AND%20a%3A"wildfly-parent"
        -->
        <version.com.fasterxml.classmate>1.7.0</version.com.fasterxml.classmate>
        <version.joda-time>2.13.0</version.joda-time>
        <version.org.slf4j>2.0.16</version.org.slf4j>
        <version.org.apache.logging.log4j>2.24.1</version.org.apache.logging.log4j>

        <!--
            These dependencies are used for integration tests with WildFly.
            They should be aligned with the ones from the Wildfly version we support
            See http://search.maven.org/#search|gav|1|g%3A"org.wildfly"%20AND%20a%3A"wildfly-parent"
        -->
        <version.org.jboss.weld.weld>6.0.0.Beta4</version.org.jboss.weld.weld>
        <version.org.wildfly.arquillian>5.0.0.Alpha3</version.org.wildfly.arquillian>
        <version.jakarta.jakartaee-bom>11.0.0-M4</version.jakarta.jakartaee-bom>
        <!--
            These are now managed by the BOM ^ but we want to have version properties available to us
            so that we can use them elsewhere, e.g. in asciidoc files.
        -->
        <version.jakarta.validation-api>3.1.0</version.jakarta.validation-api>
        <version.jakarta.persistence-api>3.2.0</version.jakarta.persistence-api>
        <version.jakarta.el-api>6.0.0</version.jakarta.el-api>

        <!-- JavaMoney dependencies -->
        <version.javax.money>1.1</version.javax.money>
        <version.org.javamoney.moneta>1.1</version.org.javamoney.moneta>
        <version.javax.annotation-api>1.3.2</version.javax.annotation-api>

        <!-- Used in the Karaf features file: it is a dependency of Moneta, and for the documentation -->
        <version.javax.annotation>1.2</version.javax.annotation>

        <!-- JavaFX dependencies -->
        <version.org.openjfx>17.0.13</version.org.openjfx>

        <!-- Test dependencies -->
        <version.org.jboss.arquillian>1.9.1.Final</version.org.jboss.arquillian>
        <version.shrinkwrap.core>1.2.6</version.shrinkwrap.core>
        <version.shrinkwrap.resolvers>3.3.2</version.shrinkwrap.resolvers>
        <version.shrinkwrap.descriptors>2.0.0</version.shrinkwrap.descriptors>
        <version.org.testng>7.10.2</version.org.testng>
        <version.org.assertj.assertj-core>3.26.3</version.org.assertj.assertj-core>
        <version.junit>4.13.2</version.junit>
        <version.org.easymock>5.4.0</version.org.easymock>
        <version.io.rest-assured>5.5.0</version.io.rest-assured>
        <version.org.apache.groovy>4.0.24</version.org.apache.groovy>
        <version.com.google.guava>33.3.1-jre</version.com.google.guava>
        <version.org.springframework.spring-expression>6.1.14</version.org.springframework.spring-expression>
        <version.org.jboss.arquillian.container.arquillian-weld-embedded>4.0.0.Final</version.org.jboss.arquillian.container.arquillian-weld-embedded>
        <version.com.fasterxml.jackson.core.jackson-databind>2.18.1</version.com.fasterxml.jackson.core.jackson-databind>
        <version.com.fasterxml.jackson.core.jackson-annotations>2.18.1</version.com.fasterxml.jackson.core.jackson-annotations>
        <version.net.bytebuddy.byte-buddy>1.15.10</version.net.bytebuddy.byte-buddy>

        <!-- OSGi dependencies -->
        <version.org.apache.karaf>4.2.0</version.org.apache.karaf>
        <version.org.ops4j.pax.exam>4.12.0</version.org.ops4j.pax.exam>
        <version.org.ops4j.pax.url>2.5.4</version.org.ops4j.pax.url>
        <version.fish.payara>5.2020.2</version.fish.payara>
        <version.fish.payara.arquillian>2.3.1</version.fish.payara.arquillian>
        <!-- Used in the Karaf tests -->
        <version.javax.inject>1</version.javax.inject>

        <!--
            Please don't change the name of this property, it may be used and
            overridden by a CI job of the Checkstyle project so that they can
            check for regressions. Which is obviously good for us, too.
         -->
        <puppycrawl.checkstyle.version>10.20.0</puppycrawl.checkstyle.version>

        <!-- Asciidoctor -->

        <version.asciidoctor.plugin>3.1.0</version.asciidoctor.plugin>
        <version.org.hibernate.infra.hibernate-asciidoctor-theme>5.0.2.Final</version.org.hibernate.infra.hibernate-asciidoctor-theme>
        <version.org.hibernate.infra.hibernate-asciidoctor-extensions>3.0.6.Final</version.org.hibernate.infra.hibernate-asciidoctor-extensions>
        <version.org.asciidoctor.asciidoctorj>3.0.0</version.org.asciidoctor.asciidoctorj>
        <version.org.asciidoctor.asciidoctorj-pdf>2.3.19</version.org.asciidoctor.asciidoctorj-pdf>

        <!-- Maven plugins versions -->

        <version.antrun.plugin>3.1.0</version.antrun.plugin>
        <version.assembly.plugin>3.7.1</version.assembly.plugin>
        <version.buildhelper.plugin>3.6.0</version.buildhelper.plugin>
        <version.bundle.plugin>5.1.9</version.bundle.plugin>
        <version.checkstyle.plugin>3.6.0</version.checkstyle.plugin>
        <version.clean.plugin>3.4.0</version.clean.plugin>
        <version.compiler.plugin>3.13.0</version.compiler.plugin>
        <version.copy.plugin>1.0.0</version.copy.plugin>
        <version.dependency.plugin>3.8.1</version.dependency.plugin>
        <version.depends.plugin>1.5.0</version.depends.plugin>
        <version.deploy.plugin>3.1.3</version.deploy.plugin>
        <version.enforcer.plugin>3.5.0</version.enforcer.plugin>
        <!-- Note: when updating this version, consider reviewing the list of JDKs the forbidden API plugin is targeting. -->
        <version.forbiddenapis.plugin>3.8</version.forbiddenapis.plugin>
        <version.gmavenplus.plugin>4.0.1</version.gmavenplus.plugin>
        <version.gpg.plugin>3.2.7</version.gpg.plugin>
        <version.install.plugin>3.1.3</version.install.plugin>
        <version.japicmp.plugin>0.23.0</version.japicmp.plugin>
        <version.jar.plugin>3.4.2</version.jar.plugin>
        <version.jqassistant.plugin>2.5.0</version.jqassistant.plugin>
        <version.javadoc.plugin>3.11.1</version.javadoc.plugin>
        <version.release.plugin>3.1.1</version.release.plugin>
        <version.resources.plugin>3.3.1</version.resources.plugin>
        <version.shade.plugin>3.6.0</version.shade.plugin>
        <version.sigtest.plugin>2.3</version.sigtest.plugin>
        <version.source.plugin>3.3.1</version.source.plugin>
        <version.surefire.plugin>3.5.2</version.surefire.plugin>
        <version.surefire.plugin.java-version.asm>9.7.1</version.surefire.plugin.java-version.asm>
        <version.failsafe.plugin>${version.surefire.plugin}</version.failsafe.plugin>
        <version.nexus-staging-maven-plugin>1.7.0</version.nexus-staging-maven-plugin>
        <version.flatten-maven-plugin>1.6.0</version.flatten-maven-plugin>
        <version.moditect.plugin>1.2.2.Final</version.moditect.plugin>
        <version.sisu-maven-plugin>0.9.0.M3</version.sisu-maven-plugin>
        <version.versions.plugin>2.17.1</version.versions.plugin>
        <version.maven-wrapper-plugin>3.3.2</version.maven-wrapper-plugin>
        <version.spotless-maven-plugin>2.43.0</version.spotless-maven-plugin>
        <version.jacoco.plugin>0.8.12</version.jacoco.plugin>
        <version.sonar.plugin>4.0.0.4121</version.sonar.plugin>

        <!-- Forbidden API related properties -->
        <forbiddenapis-junit.path>forbidden-junit.txt</forbiddenapis-junit.path>

        <!-- Repository Deployment URLs -->

        <ossrh.releases.repo.id>ossrh</ossrh.releases.repo.id>
        <ossrh.releases.repo.url>https://oss.sonatype.org/service/local/staging/deploy/maven2/</ossrh.releases.repo.url>
        <ossrh.releases.repo.baseUrl>https://oss.sonatype.org/</ossrh.releases.repo.baseUrl>
        <ossrh.snapshots.repo.id>ossrh</ossrh.snapshots.repo.id>
        <ossrh.snapshots.repo.url>https://oss.sonatype.org/content/repositories/snapshots</ossrh.snapshots.repo.url>

        <!--
            We don't want to publish or sign any modules by default.
            Specific modules will override the setting at their own level.
        -->
        <deploy.skip>true</deploy.skip>
        <maven-deploy-plugin.skip>true</maven-deploy-plugin.skip>
        <forbiddenapis.skip>false</forbiddenapis.skip>
        <checkstyle.skip>false</checkstyle.skip>

        <!-- Maven Central repository -->

        <mavencentral.repo.url>https://repo.maven.apache.org/maven2/</mavencentral.repo.url>

        <!-- Jakarta Staging repository -->
        <!-- Can be used for versions of Validation TCK/API -->
        <jakarta.staging.repo.id>jakarta-staging</jakarta.staging.repo.id>
        <jakarta.staging.repo.url>https://jakarta.oss.sonatype.org/content/repositories/staging/</jakarta.staging.repo.url>

        <!-- Build settings -->

        <hibernate-validator-parent.path>.</hibernate-validator-parent.path>

        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>

        <!--
            The lowest supported version of Java for applications using Hibernate Validator
            Set statically, independently of the current JDK: we want our code to comply with this version

            Note: when updating this version, consider reviewing the list of JDKs the forbidden API plugin is targeting.
        -->
        <java-version.main.release>17</java-version.main.release>
        <java-version.main.compiler.java_home>${java.home}</java-version.main.compiler.java_home>
        <java-version.main.compiler>${java-version.main.compiler.java_home}/bin/javac</java-version.main.compiler>
        <!-- The version of test bytecode, useful for testing compatibility with newer JDKs -->
        <!-- Set to the version of the JDK running Maven by default, but overridden on CI -->
        <!-- 'java.specification.version' is only correct from Java 9 onwards, but we require Java 17 to run the build anyway -->
        <java-version.test.release>${java.specification.version}</java-version.test.release>
        <java-version.test.compiler.java_home>${java.home}</java-version.test.compiler.java_home>
        <java-version.test.compiler>${java-version.test.compiler.java_home}/bin/javac</java-version.test.compiler>
        <!-- IMPORTANT: For Java 8, this must be the path to the JDK, not to the JRE -->
        <java-version.test.launcher.java_home>${java-version.test.compiler.java_home}</java-version.test.launcher.java_home>
        <java-version.test.launcher>${java-version.test.launcher.java_home}/bin/java</java-version.test.launcher>

        <!-- Set empty default value to avoid Maven leaving property references (${...}) when it doesn't find a value -->
        <maven.javadoc.skip>false</maven.javadoc.skip>
        <!-- Whether javadoc warnings should fail the build -->
        <failOnJavadocWarning>true</failOnJavadocWarning>
        <javadoc.generate.jar.phase>none</javadoc.generate.jar.phase>
        <!-- We control whether we should download javadoc based on this property
             that defines the phase of some Maven plugin executions,
             because just skipping those plugins doesn't skip dependency resolution,
             which will fail if javadoc wasn't downloaded. -->
        <javadoc.download.phase>generate-resources</javadoc.download.phase>
        <javadoc.packagelists.directory>${project.build.directory}/dependencies-javadoc-packagelists</javadoc.packagelists.directory>
        <javadoc.jakarta.validation.url>https://jakarta.ee/specifications/bean-validation/${parsed-version.jakarta.validation-api.majorVersion}.${parsed-version.jakarta.validation-api.minorVersion}/apidocs/</javadoc.jakarta.validation.url>
        <javadoc.jakarta.el.url>https://jakarta.ee/specifications/expression-language/${parsed-version.jakarta.el-api.majorVersion}.${parsed-version.jakarta.el-api.minorVersion}/apidocs/</javadoc.jakarta.el.url>
        <javadoc.jakarta.el.url>https://jakarta.ee/specifications/expression-language/${parsed-version.jakarta.el-api.majorVersion}.${parsed-version.jakarta.el-api.minorVersion}/apidocs/</javadoc.jakarta.el.url>
        <javadoc.javamoney.url>http://javamoney.github.io/apidocs</javadoc.javamoney.url>
        <javadoc.assertj.url>https://www.javadoc.io/doc/org.assertj/assertj-core/${version.org.assertj.assertj-core}/</javadoc.assertj.url>

        <!-- Also set source/target, because several other plugins rely on this and don't understand release -->
        <maven.compiler.source>${java-version.main.release}</maven.compiler.source>
        <maven.compiler.target>${java-version.main.release}</maven.compiler.target>
        <maven.compiler.testSource>${java-version.test.release}</maven.compiler.testSource>
        <maven.compiler.testTarget>${java-version.test.release}</maven.compiler.testTarget>
        <maven.compiler.release>${java-version.main.release}</maven.compiler.release>
        <maven.compiler.testRelease>${java-version.test.release}</maven.compiler.testRelease>

        <!--
             The absolute path to the root project directory.
             This property is set by the build-helper plugin.
             We initialize it to some crude, potentially wrong value,
             because the Sonar Maven plugin uses this property indirectly,
             but ignores any change made by other plugins.
             This default value is the best we can do without the help of a Maven plugin.

             Useful resources:
              - https://www.mojohaus.org/build-helper-maven-plugin/rootlocation-mojo.html
          -->
        <rootProject.directory>${user.dir}</rootProject.directory>

        <!-- Set empty default values to avoid Maven leaving property references (${...}) when it doesn't find a value -->
        <!-- Argument passed from the command line -->
        <surefire.jvm.args.commandline></surefire.jvm.args.commandline>
        <surefire.jvm.args.additional></surefire.jvm.args.additional>
        <surefire.jvm.args.illegal-access></surefire.jvm.args.illegal-access>
        <surefire.jvm.args.add-opens></surefire.jvm.args.add-opens>
        <surefire.jvm.args.java-version></surefire.jvm.args.java-version>
        <surefire.jvm.args.jaxp.strict-args></surefire.jvm.args.jaxp.strict-args>
        <!-- JVM args generated by JaCoCo -->
        <surefire.jvm.args.jacoco></surefire.jvm.args.jacoco>
        <failsafe.jvm.args.jacoco></failsafe.jvm.args.jacoco>
        <!--
          The arguments below are Shrinkwrap settings taken from
          https://github.com/shrinkwrap/resolver/blob/788a3c1148af3a7ebdfdaf817393273f5f5ee17b/impl-maven/src/main/java/org/jboss/shrinkwrap/resolver/impl/maven/bootstrap/MavenSettingsBuilder.java#L80
          - maven.repo.local: necessary for the Shrinkwrap artifact retrieval to work when using a non-default local repository
         -->
        <surefire.jvm.args.shrinkwrap>
            -Dmaven.repo.local=${settings.localRepository}
        </surefire.jvm.args.shrinkwrap>
        <surefire.jvm.nojacoco.args>${surefire.jvm.args.additional} ${surefire.jvm.args.add-opens} ${surefire.jvm.args.illegal-access} ${surefire.jvm.args.shrinkwrap} ${surefire.jvm.args.java-version} ${surefire.jvm.args.commandline} ${surefire.jvm.args.jaxp.strict-args}</surefire.jvm.nojacoco.args>
        <surefire.jvm.args>${surefire.jvm.nojacoco.args} @{surefire.jvm.args.jacoco}</surefire.jvm.args>
        <failsafe.jvm.args>${surefire.jvm.args.additional} ${surefire.jvm.args.add-opens} ${surefire.jvm.args.illegal-access} ${surefire.jvm.args.shrinkwrap} ${surefire.jvm.args.java-version} ${surefire.jvm.args.commandline} ${surefire.jvm.args.jaxp.strict-args} @{failsafe.jvm.args.jacoco}</failsafe.jvm.args>

        <!--
            Should be set from the command line.
            Used by CI jobs that execute tests in multiple environments.
            Allows distinguishing between multiple executions of the same test in test reports.
         -->
        <surefire.environment>default</surefire.environment>
        <jacoco.environment.sub-directory>${surefire.environment}</jacoco.environment.sub-directory>
        <surefire.default.reportsDirectory>${project.build.directory}/surefire-reports</surefire.default.reportsDirectory>

        <arquillian.wildfly.jvm.args.add-opens></arquillian.wildfly.jvm.args.add-opens>
        <arquillian.wildfly.jvm.args.add-modules></arquillian.wildfly.jvm.args.add-modules>
        <arquillian.wildfly.jvm.args>-Duser.language=en -Duser.country=US ${arquillian.wildfly.jvm.args.add-opens} ${arquillian.wildfly.jvm.args.add-modules}</arquillian.wildfly.jvm.args>

        <!-- JDK version required for the build -->
        <!-- Remember to update README when changing the version here. -->
        <jdk.min.version>17</jdk.min.version>
        <!-- Maven version required for the build -->
        <!--
            When changing the version here, remember to:
                - update README
                - run mvn wrapper:wrapper to re-generate the maven wrapper
            -->
        <maven.min.version>3.9.9</maven.min.version>

        <!-- Formatting -->
        <format.skip>false</format.skip>
        <goal.spotless-maven-plugin>apply</goal.spotless-maven-plugin>

        <!-- Sonar options -->
        <!--
            We want to take into account coverage data from integration tests from other projects as well.
            This requires to use a single destination file for ITs, because:
             - Integration tests cover code from other modules.
             - The Sonar plugin computes coverage when inspecting each module,
               and by default only takes into account JaCoCo coverage reports from the inspected module.
               Thus it ignores some relevant ITs by default.
             - Even when configured, the Sonar plugin only accept an *explicit* list of JaCoCo coverage reports
               (no wildcards).
               Thus we cannot easily configure the Sonar plugin to inspect JaCoCo coverage reports from other modules,
               unless we somehow aggregate all of the coverage data into a single, shared JaCoCo coverage report.
            The chosen solution was to make the "reports" module invoke jacoco's "report-aggregate" goal
            to create a single aggregate report, and configure sonar to only inspect that file.

            Useful resources to understand what is going on (caution, not everything is up-to-date):
             - https://docs.sonarqube.org/display/SONAR/Analysis+Parameters
             - https://docs.sonarqube.org/display/PLUG/Usage+of+JaCoCo+with+Java+Plugin
             - https://www.devcon5.ch/en/blog/2015/05/29/multi-module-integration-test-coverage-sonar-jacoco/
             - http://javamemento.blogspot.fr/2016/02/sonar-jacoco-maven-multi-module.html
             - https://github.com/SonarSource/sonar-scanning-examples/blob/master/sonarqube-scanner-maven/pom.xml
             - https://stackoverflow.com/a/49528226/6692043
             - https://www.eclemma.org/jacoco/trunk/doc/report-aggregate-mojo.html
             - Not relevant anymore, but we used to merge *.exec files: https://www.eclemma.org/jacoco/trunk/doc/merge-mojo.html
         -->
        <sonar.coverage.jacoco.xmlReportPaths>${rootProject.directory}/build/reports/target/site/jacoco-aggregate/jacoco.xml</sonar.coverage.jacoco.xmlReportPaths>
        <!--
            Exclude build code and integration tests defined in the main source from coverage computation.
         -->
        <sonar.coverage.exclusions>
            **/org/hibernate/checkstyle/**,
            **/org/hibernate/validator/build/enforcer/**,
        </sonar.coverage.exclusions>
        <!--
            Exclude build code, unit tests and integration tests from duplication analysis.
         -->
        <sonar.cpd.exclusions>
            **/org/hibernate/checkstyle/**,
            **/org/hibernate/validator/build/enforcer/**,
            **/src/test/java/**
        </sonar.cpd.exclusions>
    </properties>

    <dependencyManagement>
        <dependencies>
            <!-- https://mvnrepository.com/artifact/jakarta.platform/jakarta.jakartaee-bom -->
            <dependency>
                <groupId>jakarta.platform</groupId>
                <artifactId>jakarta.jakartaee-bom</artifactId>
                <version>${version.jakarta.jakartaee-bom}</version>
                <type>pom</type>
                <scope>import</scope>
            </dependency>
            <dependency>
                <groupId>org.jboss.logging</groupId>
                <artifactId>jboss-logging</artifactId>
                <version>${version.org.jboss.logging.jboss-logging}</version>
            </dependency>
            <dependency>
                <groupId>org.jboss.logging</groupId>
                <artifactId>jboss-logging-processor</artifactId>
                <version>${version.org.jboss.logging.jboss-logging-tools}</version>
            </dependency>
            <dependency>
                <groupId>org.jboss.logging</groupId>
                <artifactId>jboss-logging-annotations</artifactId>
                <version>${version.org.jboss.logging.jboss-logging-tools}</version>
                <scope>provided</scope>
                <optional>true</optional>
            </dependency>
            <dependency>
                <groupId>org.glassfish.expressly</groupId>
                <artifactId>expressly</artifactId>
                <version>${version.org.glassfish.expressly}</version>
            </dependency>
            <dependency>
                <groupId>com.fasterxml</groupId>
                <artifactId>classmate</artifactId>
                <version>${version.com.fasterxml.classmate}</version>
            </dependency>
            <dependency>
                <groupId>joda-time</groupId>
                <artifactId>joda-time</artifactId>
                <version>${version.joda-time}</version>
            </dependency>
            <dependency>
                <groupId>javax.money</groupId>
                <artifactId>money-api</artifactId>
                <version>${version.javax.money}</version>
            </dependency>
            <dependency>
                <groupId>org.javamoney</groupId>
                <artifactId>moneta</artifactId>
                <version>${version.org.javamoney.moneta}</version>
            </dependency>
            <dependency>
                <groupId>org.openjfx</groupId>
                <artifactId>javafx-base</artifactId>
                <version>${version.org.openjfx}</version>
            </dependency>
            <dependency>
                <groupId>net.bytebuddy</groupId>
                <artifactId>byte-buddy</artifactId>
                <version>${version.net.bytebuddy.byte-buddy}</version>
            </dependency>
            <dependency>
                <groupId>org.apache.logging.log4j</groupId>
                <artifactId>log4j-core</artifactId>
                <version>${version.org.apache.logging.log4j}</version>
            </dependency>
            <dependency>
                <groupId>org.slf4j</groupId>
                <artifactId>slf4j-api</artifactId>
                <version>${version.org.slf4j}</version>
            </dependency>
            <dependency>
                <groupId>org.apache.logging.log4j</groupId>
                <artifactId>log4j-slf4j-impl</artifactId>
                <version>${version.org.apache.logging.log4j}</version>
            </dependency>
            <dependency>
                <groupId>junit</groupId>
                <artifactId>junit</artifactId>
                <version>${version.junit}</version>
            </dependency>
            <dependency>
                <groupId>org.testng</groupId>
                <artifactId>testng</artifactId>
                <version>${version.org.testng}</version>
            </dependency>
            <dependency>
                <groupId>org.apache.groovy</groupId>
                <artifactId>groovy-jsr223</artifactId>
                <version>${version.org.apache.groovy}</version>
            </dependency>
            <dependency>
                <groupId>org.easymock</groupId>
                <artifactId>easymock</artifactId>
                <version>${version.org.easymock}</version>
            </dependency>
            <dependency>
                <groupId>org.assertj</groupId>
                <artifactId>assertj-core</artifactId>
                <version>${version.org.assertj.assertj-core}</version>
            </dependency>
            <dependency>
                <groupId>io.rest-assured</groupId>
                <artifactId>rest-assured</artifactId>
                <version>${version.io.rest-assured}</version>
            </dependency>
            <dependency>
                <groupId>org.jboss.arquillian</groupId>
                <artifactId>arquillian-bom</artifactId>
                <version>${version.org.jboss.arquillian}</version>
                <type>pom</type>
                <scope>import</scope>
            </dependency>
            <!--  ShrinkWrap  -->
            <dependency>
                <groupId>org.jboss.shrinkwrap</groupId>
                <artifactId>shrinkwrap-bom</artifactId>
                <version>${version.shrinkwrap.core}</version>
                <type>pom</type>
                <scope>import</scope>
            </dependency>
            <!--  ShrinkWrap Resolver  -->
            <dependency>
                <groupId>org.jboss.shrinkwrap.resolver</groupId>
                <artifactId>shrinkwrap-resolver-bom</artifactId>
                <version>${version.shrinkwrap.resolvers}</version>
                <type>pom</type>
                <scope>import</scope>
            </dependency>
            <!--  ShrinkWrap Descriptors  -->
            <dependency>
                <groupId>org.jboss.shrinkwrap.descriptors</groupId>
                <artifactId>shrinkwrap-descriptors-bom</artifactId>
                <version>${version.shrinkwrap.descriptors}</version>
                <type>pom</type>
                <scope>import</scope>
            </dependency>
            <dependency>
                <groupId>javax.annotation</groupId>
                <artifactId>javax.annotation-api</artifactId>
                <version>${version.javax.annotation-api}</version>
            </dependency>
            <dependency>
                <groupId>org.jboss.weld</groupId>
                <artifactId>weld-core-impl</artifactId>
                <version>${version.org.jboss.weld.weld}</version>
            </dependency>
            <dependency>
                <groupId>org.wildfly.arquillian</groupId>
                <artifactId>wildfly-arquillian-container-managed</artifactId>
                <version>${version.org.wildfly.arquillian}</version>
                <exclusions>
                    <exclusion>
                        <groupId>sun.jdk</groupId>
                        <artifactId>jconsole</artifactId>
                    </exclusion>
                </exclusions>
            </dependency>
            <dependency>
                <groupId>org.jboss.arquillian.container</groupId>
                <artifactId>arquillian-weld-embedded</artifactId>
                <version>${version.org.jboss.arquillian.container.arquillian-weld-embedded}</version>
                <scope>test</scope>
            </dependency>
            <dependency>
                <groupId>com.thoughtworks.paranamer</groupId>
                <artifactId>paranamer</artifactId>
                <version>${version.com.thoughtworks.paranamer}</version>
            </dependency>
            <dependency>
                <groupId>com.google.guava</groupId>
                <artifactId>guava</artifactId>
                <version>${version.com.google.guava}</version>
                <scope>test</scope>
            </dependency>
            <dependency>
                <groupId>org.springframework</groupId>
                <artifactId>spring-expression</artifactId>
                <version>${version.org.springframework.spring-expression}</version>
                <scope>test</scope>
            </dependency>
            <dependency>
                <groupId>com.fasterxml.jackson.core</groupId>
                <artifactId>jackson-databind</artifactId>
                <version>${version.com.fasterxml.jackson.core.jackson-databind}</version>
                <scope>test</scope>
            </dependency>
            <dependency>
                <groupId>com.fasterxml.jackson.core</groupId>
                <artifactId>jackson-annotations</artifactId>
                <version>${version.com.fasterxml.jackson.core.jackson-annotations}</version>
                <scope>test</scope>
            </dependency>
            <dependency>
                <groupId>javax.inject</groupId>
                <artifactId>javax.inject</artifactId>
                <version>${version.javax.inject}</version>
            </dependency>
        </dependencies>
    </dependencyManagement>

    <build>
        <plugins>
            <plugin>
                <artifactId>maven-enforcer-plugin</artifactId>
                <version>${version.enforcer.plugin}</version>
                <executions>
                    <execution>
                        <id>enforce-java</id>
                        <goals>
                            <goal>enforce</goal>
                        </goals>
                        <configuration>
                            <rules>
                                <requireJavaVersion>
                                    <version>[${jdk.min.version},)</version>
                                </requireJavaVersion>
                                <requireMavenVersion>
                                    <version>${maven.min.version}</version>
                                </requireMavenVersion>
                                <bannedDependencies>
                                    <excludes>
                                        <exclude>javax.validation:validation-api</exclude>
                                        <exclude>org.glassfish:javax.el</exclude>
                                        <exclude>javax.annotation:javax.annotation-api</exclude>
                                        <exclude>org.jboss.spec.javax.interceptor:jboss-interceptors-api_1.2_spec</exclude>
                                        <exclude>javax.enterprise:cdi-api</exclude>
                                        <exclude>javax.persistence:javax.persistence-api</exclude>
                                    </excludes>
                                    <includes>
                                        <include>javax.annotation:javax.annotation-api:*:*:test</include>
                                    </includes>
                                </bannedDependencies>
                            </rules>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>build-helper-maven-plugin</artifactId>
                <executions>
                    <execution>
                        <id>set-root-location-property</id>
                        <goals>
                            <goal>rootlocation</goal>
                        </goals>
                        <configuration>
                            <rootLocationProperty>rootProject.directory</rootLocationProperty>
                        </configuration>
                    </execution>
                    <execution>
                        <id>parse-jakarta-validation-spec-version</id>
                        <goals>
                            <goal>parse-version</goal>
                        </goals>
                        <configuration>
                            <propertyPrefix>parsed-version.jakarta.validation-api</propertyPrefix>
                            <versionString>${version.jakarta.validation-api}</versionString>
                        </configuration>
                    </execution>
                    <execution>
                        <id>parse-jakarta-persistence-spec-version</id>
                        <goals>
                            <goal>parse-version</goal>
                        </goals>
                        <configuration>
                            <propertyPrefix>parsed-version.jakarta.persistence-api</propertyPrefix>
                            <versionString>${version.jakarta.persistence-api}</versionString>
                        </configuration>
                    </execution>
                    <execution>
                        <id>parse-jakarta-el-spec-version</id>
                        <goals>
                            <goal>parse-version</goal>
                        </goals>
                        <configuration>
                            <propertyPrefix>parsed-version.jakarta.el-api</propertyPrefix>
                            <versionString>${version.jakarta.el-api}</versionString>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <!--
                 Configure the nexus-staging-maven-plugin explicitly (without <extension>true</extension>)
                 in order to work around a problem in the "reports" module (see that module's POM for more info).
             -->
            <plugin>
                <groupId>org.sonatype.plugins</groupId>
                <artifactId>nexus-staging-maven-plugin</artifactId>
                <extensions>false</extensions><!-- This is essential: do not put true here -->
                <configuration>
                    <serverId>${ossrh.releases.repo.id}</serverId>
                    <!-- The following, by default, is only used for actual releases, not for snapshot deployments -->
                    <nexusUrl>${ossrh.releases.repo.baseUrl}</nexusUrl>
                    <!-- oss.sonatype.org has been very slow when closing repositories lately;
                         let's raise the timeout until we switch to s01.sonatype.org -->
                    <stagingProgressTimeoutMinutes>60</stagingProgressTimeoutMinutes>
                </configuration>
                <executions>
                    <execution>
                        <id>default-deploy</id>
                        <phase>deploy</phase>
                        <goals>
                            <!--
                                This will only put artifacts in a staging directory.
                                See the "reports" module for actual deployment, at the end of the build.
                             -->
                            <goal>deploy</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
        <pluginManagement>
            <plugins>
                <plugin>
                    <artifactId>maven-antrun-plugin</artifactId>
                    <version>${version.antrun.plugin}</version>
                </plugin>
                <plugin>
                    <artifactId>maven-clean-plugin</artifactId>
                    <version>${version.clean.plugin}</version>
                </plugin>
                <plugin>
                    <artifactId>maven-jar-plugin</artifactId>
                    <version>${version.jar.plugin}</version>
                    <configuration>
                        <archive>
                            <manifestEntries>
                                <Implementation-Title>${project.artifactId}</Implementation-Title>
                                <Implementation-Version>${project.version}</Implementation-Version>
                                <Implementation-Vendor>${project.parent.groupId}</Implementation-Vendor>
                                <Implementation-Vendor-Id>${project.parent.groupId}</Implementation-Vendor-Id>
                                <Implementation-URL>https://hibernate.org/validator/</Implementation-URL>
                            </manifestEntries>
                        </archive>
                    </configuration>
                </plugin>
                <plugin>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <version>${version.compiler.plugin}</version>
                    <configuration>
                        <showWarnings>true</showWarnings>
                        <showDeprecation>true</showDeprecation>
                        <failOnWarning>true</failOnWarning>
                        <testCompilerArgument>-parameters</testCompilerArgument>
                    </configuration>
                    <executions>
                        <execution>
                            <id>default-compile</id>
                            <configuration>
                                <fork>true</fork>
                                <executable>${java-version.main.compiler}</executable>
                            </configuration>
                        </execution>
                        <execution>
                            <id>default-testCompile</id>
                            <configuration>
                                <fork>true</fork>
                                <executable>${java-version.test.compiler}</executable>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>
                <plugin>
                    <artifactId>maven-checkstyle-plugin</artifactId>
                    <version>${version.checkstyle.plugin}</version>
                    <dependencies>
                        <dependency>
                            <groupId>${project.groupId}</groupId>
                            <artifactId>hibernate-validator-build-config</artifactId>
                            <version>${project.version}</version>
                        </dependency>
                        <!--
                             force SLF4J dependency to align
                             Maven internals and CheckStyle's
                             see https://github.com/jcgay/maven-color/wiki/Problems
                             If that causes problem, that can be removed
                             but maven-color won't work -->
                        <dependency>
                            <groupId>com.puppycrawl.tools</groupId>
                            <artifactId>checkstyle</artifactId>
                            <version>${puppycrawl.checkstyle.version}</version>
                        </dependency>
                        <dependency>
                            <groupId>org.slf4j</groupId>
                            <artifactId>jcl-over-slf4j</artifactId>
                            <version>${version.org.slf4j}</version>
                        </dependency>
                        <dependency>
                            <groupId>org.slf4j</groupId>
                            <artifactId>slf4j-jdk14</artifactId>
                            <version>${version.org.slf4j}</version>
                        </dependency>
                    </dependencies>
                    <configuration>
                        <skip>${checkstyle.skip}</skip>
                        <configLocation>checkstyle.xml</configLocation>
                        <consoleOutput>true</consoleOutput>
                        <failsOnError>true</failsOnError>
                        <violationSeverity>error</violationSeverity>
                        <includeResources>true</includeResources>
                        <includeTestResources>false</includeTestResources>
                        <includeTestSourceDirectory>true</includeTestSourceDirectory>
                        <resourceIncludes>**/*.xml,**/*.properties</resourceIncludes>
                        <!-- These classes are either imported from other sources and re-formatted
                        or generated or present significant reasons to not follow the rules. -->
                        <excludes>
                            **/org/hibernate/validator/internal/xml/binding/*.java,
                            **/Log_$logger.java,
                            **/Messages_$bundle.java,
                            **/ConcurrentReferenceHashMap.java,
                            **/TypeHelper*.java,
                            **/TckRunner.java,
                            <!-- checkstyle cannot process module-info files ...  -->
                            **/module-info.java
                        </excludes>
                    </configuration>
                    <executions>
                        <execution>
                            <id>check-style</id>
                            <phase>verify</phase>
                            <goals>
                                <goal>check</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin>
                <plugin>
                    <groupId>de.thetaphi</groupId>
                    <artifactId>forbiddenapis</artifactId>
                    <version>${version.forbiddenapis.plugin}</version>
                    <configuration>
                        <!-- if the Java version used is too new, don't fail, just do nothing -->
                        <failOnUnsupportedJava>false</failOnUnsupportedJava>
                        <ignoreSignaturesOfMissingClasses>true</ignoreSignaturesOfMissingClasses>
                        <suppressAnnotations>
                            <annotation>**.IgnoreForbiddenApisErrors</annotation>
                        </suppressAnnotations>
                        <signaturesArtifacts>
                            <signaturesArtifact>
                                <groupId>org.hibernate.validator</groupId>
                                <artifactId>hibernate-validator-build-config</artifactId>
                                <version>${project.version}</version>
                                <type>jar</type>
                                <path>forbidden-common.txt</path>
                            </signaturesArtifact>
                            <signaturesArtifact>
                                <groupId>org.hibernate.validator</groupId>
                                <artifactId>hibernate-validator-build-config</artifactId>
                                <version>${project.version}</version>
                                <type>jar</type>
                                <path>${forbiddenapis-junit.path}</path>
                            </signaturesArtifact>
                        </signaturesArtifacts>
                        <skip>${forbiddenapis.skip}</skip>
                    </configuration>
                    <executions>
                        <execution>
                            <id>check-main</id>
                            <goals>
                                <goal>check</goal>
                            </goals>
                            <phase>verify</phase>
                            <configuration>
                                <bundledSignatures>
                                    <!-- These signatures on the top are not specific to any JDK version -->
                                    <bundledSignature>jdk-system-out</bundledSignature>
                                    <bundledSignature>jdk-non-portable</bundledSignature>

                                    <!-- All following signatures should be replicated for each target JDK version we intend to support -->
                                    <bundledSignature>jdk-unsafe-17</bundledSignature>
                                    <bundledSignature>jdk-unsafe-18</bundledSignature>
                                    <bundledSignature>jdk-unsafe-19</bundledSignature>
                                    <bundledSignature>jdk-unsafe-21</bundledSignature>
                                    <bundledSignature>jdk-unsafe-22</bundledSignature>

                                    <bundledSignature>jdk-deprecated-17</bundledSignature>
                                    <bundledSignature>jdk-deprecated-18</bundledSignature>
                                    <bundledSignature>jdk-deprecated-19</bundledSignature>
                                    <bundledSignature>jdk-deprecated-21</bundledSignature>
                                    <bundledSignature>jdk-deprecated-22</bundledSignature>

                                    <bundledSignature>jdk-internal-17</bundledSignature>
                                    <bundledSignature>jdk-internal-18</bundledSignature>
                                    <bundledSignature>jdk-internal-19</bundledSignature>
                                    <bundledSignature>jdk-internal-21</bundledSignature>
                                    <bundledSignature>jdk-internal-22</bundledSignature>
                                </bundledSignatures>
                            </configuration>
                        </execution>
                        <execution>
                            <id>check-test</id>
                            <goals>
                                <goal>testCheck</goal>
                            </goals>
                            <phase>verify</phase>
                            <configuration>
                                <bundledSignatures>
                                    <bundledSignature>jdk-deprecated</bundledSignature>
                                </bundledSignatures>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>
                <plugin>
                    <artifactId>maven-surefire-plugin</artifactId>
                    <version>${version.surefire.plugin}</version>
                    <configuration>
                        <forkCount>1</forkCount>
                        <redirectTestOutputToFile>true</redirectTestOutputToFile>
                        <includes>
                            <include>**/*Test.java</include>
                        </includes>
                        <jvm>${java-version.test.launcher}</jvm>
                        <argLine>${surefire.jvm.args}</argLine>
                        <reportNameSuffix>${surefire.environment}</reportNameSuffix>
                        <environmentVariables>
                            <!-- Ensure Java programs launched in tests (Payara, WildFly)
                                 use the test Java home, not the Maven Java home -->
                            <JAVA_HOME>${java-version.test.launcher.java_home}</JAVA_HOME>
                        </environmentVariables>
                        <reportsDirectory>${surefire.default.reportsDirectory}</reportsDirectory>
                    </configuration>
                    <dependencies>
                        <!--
                             maven-surefire-plugin and maven-failsafe-plugin use an older version of ASM
                             that cannot handle Java 15+ bytecode.
                             Let's upgrade that dependency and hope for the best;
                             if it doesn't work, the build is very likely to fail and we'll know about it.
                         -->
                        <dependency>
                            <groupId>org.ow2.asm</groupId>
                            <artifactId>asm</artifactId>
                            <version>${version.surefire.plugin.java-version.asm}</version>
                        </dependency>
                    </dependencies>
                </plugin>
                <plugin>
                    <artifactId>maven-surefire-report-plugin</artifactId>
                    <version>${version.surefire.plugin}</version>
                    <executions>
                        <execution>
                            <id>generate-test-report</id>
                            <phase>test</phase>
                            <goals>
                                <goal>report-only</goal>
                            </goals>
                        </execution>
                    </executions>
                    <configuration>
                        <outputName>test-report</outputName>
                    </configuration>
                </plugin>
                <plugin>
                    <artifactId>maven-failsafe-plugin</artifactId>
                    <version>${version.failsafe.plugin}</version>
                    <configuration>
                        <jvm>${java-version.test.launcher}</jvm>
                        <argLine>${failsafe.jvm.args}</argLine>
                        <reportNameSuffix>${surefire.environment}</reportNameSuffix>
                        <environmentVariables>
                            <!-- Ensure Java programs launched in tests (Payara, WildFly)
                                 use the test Java home, not the Maven Java home -->
                            <JAVA_HOME>${java-version.test.launcher.java_home}</JAVA_HOME>
                        </environmentVariables>
                    </configuration>
                    <dependencies>
                        <!--
                             maven-surefire-plugin and maven-failsafe-plugin use an older version of ASM
                             that cannot handle Java 15+ bytecode.
                             Let's upgrade that dependency and hope for the best;
                             if it doesn't work, the build is very likely to fail and we'll know about it.
                         -->
                        <dependency>
                            <groupId>org.ow2.asm</groupId>
                            <artifactId>asm</artifactId>
                            <version>${version.surefire.plugin.java-version.asm}</version>
                        </dependency>
                    </dependencies>
                </plugin>
                <plugin>
                    <artifactId>maven-dependency-plugin</artifactId>
                    <version>${version.dependency.plugin}</version>
                </plugin>
                <plugin>
                    <artifactId>maven-install-plugin</artifactId>
                    <version>${version.install.plugin}</version>
                </plugin>
                <plugin>
                    <artifactId>maven-assembly-plugin</artifactId>
                    <version>${version.assembly.plugin}</version>
                </plugin>
                <plugin>
                    <artifactId>maven-release-plugin</artifactId>
                    <version>${version.release.plugin}</version>
                    <configuration>
                        <preparationGoals>clean install</preparationGoals>
                        <autoVersionSubmodules>true</autoVersionSubmodules>
                        <allowTimestampedSnapshots>true</allowTimestampedSnapshots>
                        <pushChanges>false</pushChanges>
                        <localCheckout>true</localCheckout>
                        <tagNameFormat>@{project.version}</tagNameFormat>
                        <releaseProfiles>documentation-pdf</releaseProfiles>
                    </configuration>
                </plugin>
                <plugin>
                    <groupId>org.asciidoctor</groupId>
                    <artifactId>asciidoctor-maven-plugin</artifactId>
                    <version>${version.asciidoctor.plugin}</version>
                    <dependencies>
                         <dependency>
                            <groupId>org.asciidoctor</groupId>
                            <artifactId>asciidoctorj</artifactId>
                            <version>${version.org.asciidoctor.asciidoctorj}</version>
                        </dependency>
                        <dependency>
                            <groupId>org.asciidoctor</groupId>
                            <artifactId>asciidoctorj-pdf</artifactId>
                            <version>${version.org.asciidoctor.asciidoctorj-pdf}</version>
                        </dependency>
                        <dependency>
                            <groupId>org.hibernate.infra</groupId>
                            <artifactId>hibernate-asciidoctor-extensions</artifactId>
                            <version>${version.org.hibernate.infra.hibernate-asciidoctor-extensions}</version>
                        </dependency>
                    </dependencies>
                </plugin>
                <plugin>
                    <groupId>ch.mfrey.maven.plugin</groupId>
                    <artifactId>copy-maven-plugin</artifactId>
                    <version>${version.copy.plugin}</version>
                </plugin>
                <plugin>
                    <groupId>org.apache.felix</groupId>
                    <artifactId>maven-bundle-plugin</artifactId>
                    <version>${version.bundle.plugin}</version>
                </plugin>
                <plugin>
                    <artifactId>maven-source-plugin</artifactId>
                    <version>${version.source.plugin}</version>
                    <executions>
                        <execution>
                            <id>attach-sources</id>
                            <phase>verify</phase>
                            <goals>
                                <goal>jar-no-fork</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin>
                <plugin>
                    <artifactId>maven-javadoc-plugin</artifactId>
                    <version>${version.javadoc.plugin}</version>
                    <configuration>
                        <!-- Fail on error alternative -->
                        <quiet>true</quiet>
                        <verbose>false</verbose>
                        <failOnWarnings>${failOnJavadocWarning}</failOnWarnings>
                        <failOnError>true</failOnError>
                        <release>${maven.compiler.release}</release>
                        <!-- Exclude implementation classes from the javadoc -->
                        <excludePackageNames>*.impl,*.impl.*,*.internal,*.internal.*</excludePackageNames>
                        <!--
                            This feature tries to set up links between javadoc of different modules.
                            We don't need that since we merge everything together in the end,
                            and it leads to really annoying additional Maven executions
                            that end up publishing build scans on CI,
                            so we disable it.
                         -->
                        <detectOfflineLinks>false</detectOfflineLinks>
                        <!--
                            Make sure to always use offline links,
                            otherwise the build will need to access external websites,
                            which leads to build failures from time to time when the websites are not available
                            (used to happen a lot with apache.org in particular).
                            maven-javadoc-plugin needs a package-list file to determine,
                            for each package/class, the most appropriate link.
                            These files are fetched from javadoc Maven artifacts
                            in the build-config module and regrouped in a single ZIP
                            (see maven-assembly-plugin config in the build-config POM)
                            which is then extracted to target/ in each module that needs to generate javadoc
                            (see maven-dependency-plugin config in this POM).
                          -->
                        <bottom><![CDATA[Copyright &copy; ${project.inceptionYear}-{currentYear} <a href="http://redhat.com">Red Hat, Inc.</a> All Rights Reserved]]></bottom>
                        <!--
                           Make sure to always use offline links,
                           otherwise the build will need to access external websites,
                           which leads to build failures from time to time when the websites are not available
                           (used to happen a lot with apache.org in particular).
                           maven-javadoc-plugin needs a package-list file to determine,
                           for each package/class, the most appropriate link.
                           These files are fetched from javadoc Maven artifacts
                           in the build-config module and regrouped in a single ZIP
                           (see maven-assembly-plugin config in the build-config POM)
                           which is then extracted to target/ in each module that needs to generate javadoc
                           (see maven-dependency-plugin config in this POM).
                         -->
                        <offlineLinks>
                            <offlineLink>
                                <url>${javadoc.javamoney.url}</url>
                                <location>${javadoc.packagelists.directory}/javamoney-api</location>
                            </offlineLink>
                            <offlineLink>
                                <url>${javadoc.jakarta.validation.url}</url>
                                <location>${javadoc.packagelists.directory}/validation-api</location>
                            </offlineLink>
                            <offlineLink>
                                <url>${javadoc.jakarta.el.url}</url>
                                <location>${javadoc.packagelists.directory}/el-api</location>
                            </offlineLink>
                            <offlineLink>
                                <url>${javadoc.assertj.url}</url>
                                <location>${javadoc.packagelists.directory}/assertj</location>
                            </offlineLink>
                        </offlineLinks>
                        <tags>
                            <tag>
                                <name>hv.experimental</name>
                                <placement>a</placement>
                                <head>Experimental</head>
                            </tag>
                        </tags>
                        <additionalOptions>
                            <!-- Java 9+ supports HTML5 for javadoc generation -->
                            <additionalOption>-html5</additionalOption>
                            <!-- Java 17+ adds a warning for every single class/method/etc. without a javadoc comment, and we have lots of those.-->
                            <additionalOption>-Xdoclint:all,-missing</additionalOption>
                        </additionalOptions>
                    </configuration>
                </plugin>
                <plugin>
                    <artifactId>maven-deploy-plugin</artifactId>
                    <version>${version.deploy.plugin}</version>
                    <configuration>
                        <!-- we use the nexus-staging plugin -->
                        <skip>${maven-deploy-plugin.skip}</skip>
                    </configuration>
                </plugin>
                <plugin>
                    <artifactId>maven-gpg-plugin</artifactId>
                    <version>${version.gpg.plugin}</version>
                </plugin>
                <plugin>
                    <artifactId>maven-resources-plugin</artifactId>
                    <version>${version.resources.plugin}</version>
                    <configuration>
                        <!-- By default the "@" character is a delimiter, causing files containing
                             that character to not be filtered properly -->
                        <useDefaultDelimiters>false</useDefaultDelimiters>
                        <delimiters>
                            <delimiter>${*}</delimiter>
                        </delimiters>
                    </configuration>
                </plugin>
                <plugin>
                    <groupId>org.codehaus.gmavenplus</groupId>
                    <artifactId>gmavenplus-plugin</artifactId>
                    <version>${version.gmavenplus.plugin}</version>
                    <dependencies>
                        <dependency>
                            <groupId>org.apache.groovy</groupId>
                            <artifactId>groovy</artifactId>
                            <version>${version.org.apache.groovy}</version>
                            <scope>runtime</scope>
                        </dependency>
                        <dependency>
                            <groupId>org.apache.groovy</groupId>
                            <artifactId>groovy-ant</artifactId>
                            <version>${version.org.apache.groovy}</version>
                            <scope>runtime</scope>
                        </dependency>
                    </dependencies>
                    <executions>
                        <execution>
                            <id>update-wildfly-current-modules</id>
                            <phase>process-sources</phase>
                            <goals>
                                <goal>execute</goal>
                            </goals>
                            <configuration>
                                <skipScriptExecution>${skip.wildfly.patch.hibernate.validator}</skipScriptExecution>
                                <scripts>
                                    <script>file:///${project.build.directory}/hibernate-validator-patch/setupModules.groovy</script>
                                </scripts>
                                <properties>
                                    <wildflyPatchedTargetDir>${wildfly.actual.target-dir}</wildflyPatchedTargetDir>
                                    <jbossLoggingVersion>${version.org.jboss.logging.jboss-logging}</jbossLoggingVersion>
                                </properties>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>
                <plugin>
                    <groupId>org.apache.servicemix.tooling</groupId>
                    <artifactId>depends-maven-plugin</artifactId>
                    <version>${version.depends.plugin}</version>
                </plugin>
                <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>build-helper-maven-plugin</artifactId>
                    <version>${version.buildhelper.plugin}</version>
                </plugin>
                <plugin>
                    <!--
                        Creates a report by running "mvn japicmp:cmp"
                        Note: you need to install the jars before running the japicmp command.
                    -->
                    <groupId>com.github.siom79.japicmp</groupId>
                    <artifactId>japicmp-maven-plugin</artifactId>
                    <version>${version.japicmp.plugin}</version>
                    <configuration>
                        <oldVersion>
                            <dependency>
                                <groupId>org.hibernate.validator</groupId>
                                <artifactId>${project.artifactId}</artifactId>
                                <version>${previous.stable}</version>
                                <type>${project.packaging}</type>
                            </dependency>
                        </oldVersion>
                        <skip>true</skip>
                        <newVersion>
                            <file>
                                <path>${project.build.directory}/${project.artifactId}-${project.version}.${project.packaging}</path>
                            </file>
                        </newVersion>
                        <parameter>
                            <onlyModified>true</onlyModified>
                            <excludes>
                                <exclude>org.hibernate.validator.internal.*</exclude>
                            </excludes>
                        </parameter>
                    </configuration>
                </plugin>
                <!-- Used to build the JMH jars -->
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-shade-plugin</artifactId>
                    <version>${version.shade.plugin}</version>
                </plugin>
                <plugin>
                    <groupId>jakarta.tck</groupId>
                    <artifactId>sigtest-maven-plugin</artifactId>
                    <version>${version.sigtest.plugin}</version>
                </plugin>
                <!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.-->
                <plugin>
                    <groupId>org.eclipse.m2e</groupId>
                    <artifactId>lifecycle-mapping</artifactId>
                    <version>1.0.0</version>
                    <configuration>
                        <lifecycleMappingMetadata>
                            <pluginExecutions>
                                <pluginExecution>
                                    <pluginExecutionFilter>
                                        <groupId>
                                            org.asciidoctor
                                        </groupId>
                                        <artifactId>
                                            asciidoctor-maven-plugin
                                        </artifactId>
                                        <versionRange>
                                            [2.2.2,)
                                        </versionRange>
                                        <goals>
                                            <goal>
                                                process-asciidoc
                                            </goal>
                                        </goals>
                                    </pluginExecutionFilter>
                                    <action>
                                        <ignore />
                                    </action>
                                </pluginExecution>
                                <pluginExecution>
                                    <pluginExecutionFilter>
                                        <groupId>
                                            org.jboss.maven.plugins
                                        </groupId>
                                        <artifactId>
                                            maven-injection-plugin
                                        </artifactId>
                                        <versionRange>
                                            [1.0.2,)
                                        </versionRange>
                                        <goals>
                                            <goal>bytecode</goal>
                                        </goals>
                                    </pluginExecutionFilter>
                                    <action>
                                        <ignore />
                                    </action>
                                </pluginExecution>
                                <pluginExecution>
                                    <pluginExecutionFilter>
                                        <groupId>
                                            org.codehaus.gmavenplus
                                        </groupId>
                                        <artifactId>
                                            gmavenplus-plugin
                                        </artifactId>
                                        <versionRange>
                                            [1.5,)
                                        </versionRange>
                                        <goals>
                                            <goal>execute</goal>
                                        </goals>
                                    </pluginExecutionFilter>
                                    <action>
                                        <ignore />
                                    </action>
                                </pluginExecution>
                                <pluginExecution>
                                    <pluginExecutionFilter>
                                        <groupId>org.apache.servicemix.tooling</groupId>
                                        <artifactId>depends-maven-plugin</artifactId>
                                        <versionRange>[1.2,)</versionRange>
                                        <goals>
                                            <goal>generate-depends-file</goal>
                                        </goals>
                                    </pluginExecutionFilter>
                                    <action>
                                        <ignore />
                                    </action>
                                </pluginExecution>
                                <pluginExecution>
                                    <pluginExecutionFilter>
                                        <groupId>org.apache.maven.plugins</groupId>
                                        <artifactId>maven-dependency-plugin</artifactId>
                                        <versionRange>[2.0,)</versionRange>
                                        <goals>
                                            <goal>copy-dependencies</goal>
                                            <goal>copy</goal>
                                            <goal>unpack</goal>
                                        </goals>
                                    </pluginExecutionFilter>
                                    <action>
                                        <ignore />
                                    </action>
                                </pluginExecution>
                            </pluginExecutions>
                        </lifecycleMappingMetadata>
                    </configuration>
                </plugin>
                <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>flatten-maven-plugin</artifactId>
                    <version>${version.flatten-maven-plugin}</version>
                    <configuration>
                        <outputDirectory>${project.build.directory}</outputDirectory>
                        <!-- Keep things like url, inceptionYear, authors...
                             everything that's required by the OSSRH Maven repository -->
                        <flattenMode>ossrh</flattenMode>
                        <pomElements>
                            <!-- We have Jakarta staging repo listed to download the TCK,
                                but there's no point in keeping it listed in the published POM files. -->
                            <repositories>remove</repositories>
                        </pomElements>
                    </configuration>
                    <executions>
                        <execution>
                            <id>flatten-pom</id>
                            <phase>process-resources</phase>
                            <goals>
                                <goal>flatten</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin>
                <plugin>
                    <groupId>com.diffplug.spotless</groupId>
                    <artifactId>spotless-maven-plugin</artifactId>
                    <version>${version.spotless-maven-plugin}</version>
                    <configuration>
                        <upToDateChecking>
                            <enabled>true</enabled>
                            <indexFile>${project.basedir}/.cache/spotless-index-${version.spotless-maven-plugin}</indexFile>
                        </upToDateChecking>
                        <formats>
                            <format>
                                <!-- XML specific rules -->
                                <includes>
                                    <include>src/**/*.xml</include>
                                </includes>
                                <trimTrailingWhitespace/>
                                <endWithNewline/>
                                <licenseHeader>
                                    <file>license.xml.header</file>
                                    <!-- Delimiter is a regex which identifies the "top" of the file i.e. all above it is considered a header -->
                                    <delimiter><![CDATA[(\n)*^(<[^!?]+|<!DOCTYPE.+)$]]></delimiter>
                                    <skipLinesMatching><![CDATA[<\?xml.+\?>]]></skipLinesMatching>
                                </licenseHeader>
                                <indent>
                                    <tabs>true</tabs>
                                    <spacesPerTab>4</spacesPerTab>
                                </indent>
                            </format>
                        </formats>
                        <!-- define a language-specific format -->
                        <java>
                            <toggleOffOn/>
                            <includes>
                                <include>src/**/*.java</include>
                            </includes>
                            <excludes>
                                <exclude>**/TypeHelper.java</exclude>
                                <exclude>**/TypeHelperTest.java</exclude>
                                <exclude>**/ConcurrentReferenceHashMap.java</exclude>
                            </excludes>
                            <indent>
                                <tabs>true</tabs>
                                <spacesPerTab>4</spacesPerTab>
                            </indent>

                            <importOrder>
                                <file>hibernate_validator_style.importorder</file>
                            </importOrder>
                            <trimTrailingWhitespace/>
                            <endWithNewline/>
                            <eclipse>
                                <!-- optional version of Eclipse Formatter -->
                                <!-- <version>4.26</version> -->
                                <file>hibernate_validator_style.xml</file>
                            </eclipse>
                            <removeUnusedImports>
                                <!-- default one fails to process the classes -->
                                <engine>cleanthat-javaparser-unnecessaryimport</engine>
                            </removeUnusedImports>
                            <licenseHeader>
                                <!--
                                    NOTE: https://github.com/diffplug/spotless/issues/532
                                    module/package -info.java files cannot apply license headers.
                                 -->
                                <file>license.java.header</file>
                                <!-- Delimiter is a regex which identifies the "top" of the file i.e. all above it is considered a header -->
                                <delimiter>(\n)*^(\/\/tag.+|\/\/spotless.+|package .+;|module .+;|\/\/.+|\/\*\*.*)$</delimiter>
                            </licenseHeader>
                            <replaceRegex>
                                <name>Remove wildcard imports</name>
                                <searchRegex>^import\s+[^\*\s]+\*;$</searchRegex>
                                <replacement>$1</replacement>
                            </replaceRegex>
                        </java>
                    </configuration>
                    <dependencies>
                        <dependency>
                            <groupId>org.hibernate.validator</groupId>
                            <artifactId>hibernate-validator-build-config</artifactId>
                            <version>${project.version}</version>
                        </dependency>
                    </dependencies>
                    <executions>
                        <execution>
                            <id>check-apply-formatting</id>
                            <configuration>
                                <skip>${format.skip}</skip>
                            </configuration>
                            <phase>process-sources</phase>
                            <goals>
                                <goal>${goal.spotless-maven-plugin}</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin>
                <plugin>
                    <groupId>org.moditect</groupId>
                    <artifactId>moditect-maven-plugin</artifactId>
                    <version>${version.moditect.plugin}</version>
                    <configuration>
                        <module>
                            <moduleInfo>
                                <name>${java.module.name}</name>
                                <exports>
                                    !org.hibernate.validator.*.internal;
                                    !org.hibernate.validator.*.internal.*;
                                    *;
                                </exports>
                            </moduleInfo>
                        </module>
                    </configuration>
                    <executions>
                        <execution>
                            <id>add-module-infos</id>
                            <phase>package</phase>
                            <goals>
                                <goal>add-module-info</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin>
                <plugin>
                    <groupId>org.eclipse.sisu</groupId>
                    <artifactId>sisu-maven-plugin</artifactId>
                    <version>${version.sisu-maven-plugin}</version>
                </plugin>
                <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>versions-maven-plugin</artifactId>
                    <version>${version.versions.plugin}</version>
                </plugin>
                <plugin>
                    <groupId>org.sonatype.plugins</groupId>
                    <artifactId>nexus-staging-maven-plugin</artifactId>
                    <version>${version.nexus-staging-maven-plugin}</version>
                    <configuration>
                        <skipNexusStagingDeployMojo>${deploy.skip}</skipNexusStagingDeployMojo>
                    </configuration>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-wrapper-plugin</artifactId>
                    <version>${version.maven-wrapper-plugin}</version>
                    <configuration>
                        <mavenVersion>${maven.min.version}</mavenVersion>
                        <distributionType>bin</distributionType>
                    </configuration>
                </plugin>
                <plugin>
                    <groupId>org.jacoco</groupId>
                    <artifactId>jacoco-maven-plugin</artifactId>
                    <version>${version.jacoco.plugin}</version>
                </plugin>
                <plugin>
                    <groupId>org.sonarsource.scanner.maven</groupId>
                    <artifactId>sonar-maven-plugin</artifactId>
                    <version>${version.sonar.plugin}</version>
                </plugin>
            </plugins>
        </pluginManagement>
    </build>

    <ciManagement>
        <system>Jenkins</system>
        <url>http://ci.hibernate.org/view/Validator/</url>
    </ciManagement>

    <issueManagement>
        <system>JIRA</system>
        <url>https://hibernate.atlassian.net/projects/HV/summary</url>
    </issueManagement>

    <inceptionYear>2007</inceptionYear>

    <licenses>
        <license>
            <name>Apache License 2.0</name>
            <url>http://www.apache.org/licenses/LICENSE-2.0.txt</url>
        </license>
    </licenses>

    <!-- The various child.*.append.path are weird but necessary to have correct URLs in flattened POMs,
        see XSD for more info. -->
    <scm child.scm.connection.inherit.append.path="false"
         child.scm.developerConnection.inherit.append.path="false"
         child.scm.url.inherit.append.path="false">
        <connection>scm:git:git://github.com/hibernate/hibernate-validator.git</connection>
        <developerConnection>scm:git:git@github.com:hibernate/hibernate-validator.git</developerConnection>
        <url>http://github.com/hibernate/hibernate-validator</url>
        <tag>HEAD</tag>
    </scm>

    <repositories>
        <repository>
            <id>${jakarta.staging.repo.id}</id>
            <name>Jakarta OSS Staging Repository</name>
            <url>${jakarta.staging.repo.url}</url>
        </repository>
    </repositories>

    <distributionManagement>
        <repository>
            <id>${ossrh.releases.repo.id}</id>
            <name>OSSRH Releases Repository</name>
            <url>${ossrh.releases.repo.url}</url>
        </repository>
        <snapshotRepository>
            <id>${ossrh.snapshots.repo.id}</id>
            <name>OSSRH Snapshots Repository</name>
            <url>${ossrh.snapshots.repo.url}</url>
        </snapshotRepository>
    </distributionManagement>

    <profiles>
        <profile>
            <id>docs</id>
            <activation>
                <property>
                    <name>disableDocumentationBuild</name>
                    <value>!true</value>
                </property>
            </activation>
            <modules>
                <module>documentation</module>
            </modules>
        </profile>
        <profile>
            <id>dist</id>
            <activation>
                <property>
                    <name>disableDistributionBuild</name>
                    <value>!true</value>
                </property>
            </activation>
            <modules>
                <module>distribution</module>
            </modules>
        </profile>
        <profile>
            <id>relocation</id>
            <modules>
                <module>relocation</module>
            </modules>
        </profile>
        <profile>
            <id>release</id>
            <properties>
                <!-- We want this execution to happen before moditect (which executes at package phase) -->
                <javadoc.generate.jar.phase>prepare-package</javadoc.generate.jar.phase>
            </properties>
            <build>
                <plugins>
                    <plugin>
                        <artifactId>maven-enforcer-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>enforce-release-rules</id>
                                <goals>
                                    <goal>enforce</goal>
                                </goals>
                                <configuration>
                                    <rules>
                                        <requireReleaseDeps />
                                        <requireJavaVersion>
                                            <version>[17,18)</version>
                                        </requireJavaVersion>
                                    </rules>
                                    <fail>true</fail>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-gpg-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>sign-artifacts</id>
                                <phase>verify</phase>
                                <goals>
                                    <goal>sign</goal>
                                </goals>
                                <configuration>
                                    <homedir>${env.RELEASE_GPG_HOMEDIR}</homedir>
                                    <bestPractices>true</bestPractices>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
        <profile>
            <id>testWithJdk11+</id>
            <activation>
                <property>
                    <name>java-version.test.release</name>
                    <value>!8</value>
                </property>
            </activation>
            <properties>
                <arquillian.wildfly.jvm.args.add-modules>
                    --add-modules=java.se
                </arquillian.wildfly.jvm.args.add-modules>
                <!--
                All these add-opens are probably not necessary for our WildFly usage but add the ones defined in
                https://github.com/ctomc/wildfly/commit/d8c4f55a1f900d931c224049c8a118ba4a5bcb45 to be on the safe side.
                -->
                <arquillian.wildfly.jvm.args.add-opens>
                    --add-opens=java.base/java.lang=ALL-UNNAMED
                    --add-opens=java.base/java.lang.reflect=ALL-UNNAMED
                    --add-opens=java.base/java.security=ALL-UNNAMED
                    --add-opens=java.base/java.math=ALL-UNNAMED
                    --add-opens=java.base/java.io=ALL-UNNAMED
                    --add-opens=java.base/java.net=ALL-UNNAMED
                    --add-opens=java.base/java.util=ALL-UNNAMED
                    --add-opens=java.base/java.util.concurrent=ALL-UNNAMED
                    --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED
                    --add-opens=java.base/java.util.concurrent.locks=ALL-UNNAMED
                    --add-opens=java.base/jdk.internal.reflect=ALL-UNNAMED
                    --add-opens=java.management/javax.management=ALL-UNNAMED
                    --add-opens=java.management/javax.management.openmbean=ALL-UNNAMED
                    --add-opens=java.naming/javax.naming=ALL-UNNAMED
                </arquillian.wildfly.jvm.args.add-opens>
            </properties>
            <build>
                <pluginManagement>
                    <plugins>
                        <plugin>
                            <groupId>org.wildfly.plugins</groupId>
                            <artifactId>wildfly-maven-plugin</artifactId>
                            <configuration>
                                <javaOpts>
                                    --add-opens=java.base/java.lang=ALL-UNNAMED
                                    --add-opens=java.base/java.security=ALL-UNNAMED
                                    --add-opens=java.base/java.io=ALL-UNNAMED
                                    --add-modules=java.se
                                </javaOpts>
                            </configuration>
                        </plugin>
                        <plugin>
                            <groupId>org.jboss.as</groupId>
                            <artifactId>patch-gen-maven-plugin</artifactId>
                            <configuration>
                                <argLine>
                                    --add-modules=java.se
                                </argLine>
                            </configuration>
                        </plugin>
                    </plugins>
                </pluginManagement>
            </build>
        </profile>
        <profile>
            <id>testWithJdk21</id>
            <activation>
                <property>
                    <name>java-version.test.release</name>
                    <value>21</value>
                </property>
            </activation>
            <properties>
                <!-- ForbiddenAPIs doesn't work with JDK20+ yet -->
                <forbiddenapis.skip>true</forbiddenapis.skip>
                <!-- We need net.bytebuddy.experimental=true to make Bytebuddy work with JDK21+ -->
                <surefire.jvm.args.java-version>-Dnet.bytebuddy.experimental=true</surefire.jvm.args.java-version>
            </properties>
        </profile>
        <profile>
            <id>testWithJdk23</id>
            <activation>
                <property>
                    <name>java-version.test.release</name>
                    <value>23</value>
                </property>
            </activation>
            <properties>
                <!-- ForbiddenAPIs doesn't work with JDK23+ yet -->
                <forbiddenapis.skip>true</forbiddenapis.skip>
                <!-- We need net.bytebuddy.experimental=true to make Bytebuddy work with JDK23+ -->
                <surefire.jvm.args.java-version>-Dnet.bytebuddy.experimental=true</surefire.jvm.args.java-version>
            </properties>
        </profile>
        <profile>
            <id>testWithJdk24</id>
            <activation>
                <property>
                    <name>java-version.test.release</name>
                    <value>24</value>
                </property>
            </activation>
            <properties>
                <!-- ForbiddenAPIs doesn't work with JDK24+ yet -->
                <forbiddenapis.skip>true</forbiddenapis.skip>
                <!-- We need net.bytebuddy.experimental=true to make Bytebuddy work with JDK24+ -->
                <surefire.jvm.args.java-version>-Dnet.bytebuddy.experimental=true</surefire.jvm.args.java-version>
            </properties>
        </profile>
        <profile>
            <!--
                This profile set some properties to make running reproducibility check build easier.
                Instead of
                    mvn clean package -DskipTests -Dgpg.skip \
                        -Dbuildinfo.detect.skip=false \
                        -Dbuildinfo.skipModules='**/**distribution**,**/**integration**,**/**build**............'
                We can run
                    mvn clean package -Pskip-checks -Preproducibility-check
            -->
            <id>reproducibility-check</id>
            <properties>
                <maven-deploy-plugin.skip>false</maven-deploy-plugin.skip>
                <skipTests>true</skipTests>
                <forbiddenapis.skip>true</forbiddenapis.skip>
                <checkstyle.skip>true</checkstyle.skip>
                <skip.wildfly.patch.unpack.server>true</skip.wildfly.patch.unpack.server>
                <skip.wildfly.patch.hibernate.validator>true</skip.wildfly.patch.hibernate.validator>
            </properties>
        </profile>
        <profile>
            <id>jqassistant</id>
            <!--
            To run the analysis on the engine module and launch a Neo4j server accessible at http://localhost:7474/, run:
                mvn -pl engine jqassistant:scan jqassistant:server -Pjqassistant
            To run the analysis on the engine module:
                mvn clean install -pl engine -Pjqassistant -DskipTests=true
            Our rules are in jqassistant/rules.xml.
            -->
            <build>
                <plugins>
                    <plugin>
                        <groupId>com.buschmais.jqassistant</groupId>
                        <artifactId>jqassistant-maven-plugin</artifactId>
                        <version>${version.jqassistant.plugin}</version>
                        <executions>
                            <execution>
                                <goals>
                                    <goal>scan</goal>
                                    <goal>analyze</goal>
                                </goals>
                                <configuration>
                                    <configurationLocations>
                                        <!-- Any JQAssistant configurations go in this yml file:  -->
                                        <configurationLocation>jqassistant/.jqassistant.yml</configurationLocation>
                                    </configurationLocations>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
        <profile>
            <id>ci-build</id>
            <properties>
                <goal.spotless-maven-plugin>check</goal.spotless-maven-plugin>
            </properties>
        </profile>
        <profile>
            <id>skip-checks</id>
            <properties>
                <enforcer.skip>true</enforcer.skip>
                <checkstyle.skip>true</checkstyle.skip>
                <format.skip>true</format.skip>
                <forbiddenapis.skip>true</forbiddenapis.skip>
            </properties>
        </profile>
        <profile>
            <id>IDEA</id>
            <activation>
                <!-- This is a trick to have the profile automatically activated by IDEA -->
                <property>
                    <name>idea.maven.embedder.version</name>
                </property>
            </activation>
            <properties>
                <!-- Intellij IDEA only understands the main -release argument,
                     so we need to do this in order for tests to compile.
                     Here's the issue in the IDEA bug tracker: https://youtrack.jetbrains.com/issue/IDEA-85478
                     It's supposedly fixed in 2022.1 EAP 6, but I couldn't get that to work. -->
                <java-version.main.release>${java-version.test.release}</java-version.main.release>
            </properties>
            <build>
                <pluginManagement>
                    <plugins>
                        <plugin>
                            <artifactId>maven-compiler-plugin</artifactId>
                            <version>${version.compiler.plugin}</version>
                            <configuration>
                                <compilerArgs>
                                    <!-- Make sure IDEA uses the -parameters for all code;
                                         IDEA ignores the "testCompilerArguments" option... -->
                                    <compilerArg>-parameters</compilerArg>
                                </compilerArgs>
                            </configuration>
                        </plugin>
                    </plugins>
                </pluginManagement>
            </build>
        </profile>

        <profile>
            <id>coverage</id>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.jacoco</groupId>
                        <artifactId>jacoco-maven-plugin</artifactId>
                        <configuration>
                            <excludes>
                                <exclude>**/*_$logger.class</exclude>
                                <exclude>**/*_$bundle.class</exclude>
                            </excludes>
                        </configuration>
                        <executions>
                            <execution>
                                <id>jacoco-prepare-agent</id>
                                <goals>
                                    <goal>prepare-agent</goal>
                                </goals>
                                <configuration>
                                    <propertyName>surefire.jvm.args.jacoco</propertyName>
                                </configuration>
                            </execution>
                            <execution>
                                <id>jacoco-prepare-agent-integration</id>
                                <!--
                                    This is necessary in order for the property to be set before we process resources,
                                    such as arquillian.xml in WildFly tests or maven.properties in OSGi tests.
                                 -->
                                <phase>initialize</phase>
                                <goals>
                                    <goal>prepare-agent-integration</goal>
                                </goals>
                                <configuration>
                                    <propertyName>failsafe.jvm.args.jacoco</propertyName>
                                    <destFile>${project.build.directory}/${jacoco.environment.sub-directory}/coverage/jacoco.exec</destFile>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <!--
             WARNING: this MUST be the very last profile,
             so that the "report" module is the very last module,
             in particular when deploying artifacts to a Nexus repository.
             See the "build/reports" module POM for more information.
         -->
        <profile>
            <id>build-reports-as-last-module</id>
            <activation>
                <property>
                    <name>!some.property.that.will.never.exist</name>
                </property>
            </activation>
            <modules>
                <module>build/reports</module>
            </modules>
        </profile>

        <!-- DO NOT ADD ANY PROFILE AFTER THIS: see above -->
    </profiles>
</project>
